annotations: {}
metadata:
  annotations: {}
  name: daylight-factor
  tag: 0.0.1
  app_version: null
  keywords:
  - ladybug-tools
  - radiance
  maintainers:
  - annotations: {}
    name: mostapha
    email: mostapha@ladybug.tools
  home: null
  sources: null
  icon: https://www.ladybug.tools/assets/img/logo.png
  deprecated: null
  description: An awesome workflow to run daylight factor!
  license: null
dependencies:
- annotations: {}
  type: operator
  name: honeybee-radiance
  hash: 3975f9c3104ac18e6559b4c92f4c4d23e1eeb1070a1298df4343e1c7e7307cff
  alias: null
  tag: 1.2.3
  source: https://example.com/test-repo
flow:
- annotations: {}
  inputs:
  - annotations: {}
    type: DAGFileInput
    name: input-grid
    description: A grid file
    default: null
    spec: null
    handler: []
    extensions: null
  - annotations: {}
    type: DAGFileInput
    name: model_hbjson
    description: Honeybee model as a hbjson file.
    default: null
    spec: null
    handler:
    - annotations: {}
      type: InputHandler
      platform:
      - grasshopper
      name: model
      description: 'A path to a HBJSON file or a HB model object built with Python
        or dotnet

        libraries.

        '
      action:
      - annotations: {}
        type: HandlerAction
        case:
        - python-object
        script: "import tempfile, os\npath = os.path.join(tempfile.TemporaryDirectory().name,\
          \ '%s.hbjson' % model.identifier)\nwith open(path, 'w') as outf:\n    json.dump(model.to_dict(),\
          \ outf)\n"
        return: path
      - annotations: {}
        type: HandlerAction
        case:
        - string
        script: null
        return: null
      link: null
      spec: null
    - annotations: {}
      type: InputHandler
      platform:
      - revit
      - rhino
      name: null
      description: null
      action:
      - annotations: {}
        type: HandlerAction
        case:
        - dotnet
        script: "{\n  //Some C# code here;\n}\n"
        return: ModelJSONPath
      link: Model
      spec: null
    extensions: null
  - annotations: {}
    type: DAGStringInput
    name: radiance-parameters
    description: The radiance parameters for ray tracing
    default: -I -ab 2 -h
    spec: null
    handler: []
  - annotations: {}
    type: DAGIntegerInput
    name: sensor-grid-count
    description: The maximum number of grid points per parallel execution
    default: null
    spec: null
    handler: []
  outputs:
  - annotations: {}
    type: DAGIntegerOutput
    name: average
    description: null
    from:
      annotations: {}
      type: TaskReference
      name: post-process
      variable: daylight-factor-average
    handler: []
  - annotations: {}
    type: DAGFolderOutput
    name: data
    description: null
    from:
      annotations: {}
      type: TaskReference
      name: post-process
      variable: post-process-folder
    handler: []
  name: main
  fail_fast: true
  tasks:
  - annotations: {}
    name: create-octree
    template: honeybee-radiance/create-octree
    arguments:
    - annotations: {}
      type: TaskPathArgument
      name: model
      from:
        annotations: {}
        type: InputFolderReference
        variable: model_hbjson
      sub_path: null
    - annotations: {}
      type: TaskPathArgument
      name: sky
      from:
        annotations: {}
        type: TaskFileReference
        name: generate-sky
        variable: sky
      sub_path: null
    needs: null
    loop: null
    sub_folder: null
    returns:
    - annotations: {}
      type: TaskPathReturn
      name: scene-file
      description: null
      path: output/octree/scene.oct
  - annotations: {}
    name: daylight-factor-simulation
    template: honeybee-radiance/ray-tracing
    arguments:
    - annotations: {}
      type: TaskArgument
      name: radiance-parameters
      from:
        annotations: {}
        type: InputReference
        variable: radiance-parameters
    - annotations: {}
      type: TaskPathArgument
      name: grid
      from:
        annotations: {}
        type: TaskFolderReference
        name: split-grid
        variable: output-grids-folder
      sub_path: '{{item.name}}'
    - annotations: {}
      type: TaskPathArgument
      name: scene-file
      from:
        annotations: {}
        type: TaskFileReference
        name: create-octree
        variable: scene-file
      sub_path: null
    needs: null
    loop:
      annotations: {}
      from:
        annotations: {}
        type: TaskReference
        name: split-grid
        variable: grid-list
    sub_folder: output/raw-results
    returns:
    - annotations: {}
      type: TaskPathReturn
      name: result-file
      description: null
      path: '{{item.name}}.res'
  - annotations: {}
    name: generate-sky
    template: honeybee-radiance/10000-lux-sky
    arguments: []
    needs: null
    loop: null
    sub_folder: null
    returns:
    - annotations: {}
      type: TaskPathReturn
      name: sky
      description: null
      path: asset/sky/10000_lux.sky
  - annotations: {}
    name: post-process
    template: honeybee-radiance/post-process
    arguments:
    - annotations: {}
      type: TaskPathArgument
      name: raw-results-folder
      from:
        annotations: {}
        type: ValueFolderReference
        path: output/raw-results
      sub_path: null
    needs: null
    loop: null
    sub_folder: null
    returns:
    - annotations: {}
      type: TaskPathReturn
      name: post-process-folder
      description: null
      path: result
    - annotations: {}
      type: TaskReturn
      name: daylight-factor-average
      description: null
  - annotations: {}
    name: split-grid
    template: honeybee-radiance/split-grid
    arguments:
    - annotations: {}
      type: TaskArgument
      name: grid-count
      from:
        annotations: {}
        type: InputReference
        variable: sensor-grid-count
    - annotations: {}
      type: TaskPathArgument
      name: grid
      from:
        annotations: {}
        type: InputFileReference
        variable: input-grid
      sub_path: null
    needs: null
    loop: null
    sub_folder: null
    returns:
    - annotations: {}
      type: TaskReturn
      name: grid-list
      description: null
    - annotations: {}
      type: TaskPathReturn
      name: output-grids-folder
      description: null
      path: output/temp
